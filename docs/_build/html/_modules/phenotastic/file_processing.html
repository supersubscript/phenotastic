
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>phenotastic.file_processing &#8212; Phenotastic 0.1.0 documentation</title>
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Phenotastic 0.1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for phenotastic.file_processing</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python2</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Created on Mon Jun  4 13:56:10 2018</span>

<span class="sd">@author: henrik</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">tifffile</span> <span class="k">import</span> <span class="n">TiffFile</span><span class="p">,</span> <span class="n">imsave</span><span class="p">,</span> <span class="n">tifffile</span>

<div class="viewcode-block" id="tvfile"><a class="viewcode-back" href="../../phenotastic.html#phenotastic.file_processing.tvfile">[docs]</a><span class="k">class</span> <span class="nc">tvfile</span><span class="p">(</span><span class="n">TiffFile</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Namespace storing the corresponding file stream and attributes governing</span>
<span class="sd">    (array) data and metadata.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    fname : str, optional</span>
<span class="sd">        Path to the input file when loading.</span>

<span class="sd">    data : numpy.ndarray, optional</span>
<span class="sd">        File (intensity) data. Stored in ZCYX order by default.</span>

<span class="sd">    metadata : dict, optional</span>
<span class="sd">        File metadata.</span>

<span class="sd">    Note</span>
<span class="sd">    ----</span>
<span class="sd">    tvfile.asarray() and tvfile.data are not guaranteed to give the same result,</span>
<span class="sd">    as tvfile.asarray() reads the input file path for data.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fname</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">fname</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">tvfile</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span></div>
        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span>

<div class="viewcode-block" id="tiffsave"><a class="viewcode-back" href="../../phenotastic.html#phenotastic.file_processing.tiffsave">[docs]</a><span class="k">def</span> <span class="nf">tiffsave</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
             <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;um&#39;</span><span class="p">,</span> <span class="n">segmented</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">backgroundlabel</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">walllabel</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ncells</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
             <span class="n">segmentation_software</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">segmentation_method</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
             <span class="n">preprocessing</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">extra_tags</span><span class="o">=</span><span class="p">{},</span>  <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Save a file in ImageJ-compatible Tiff format.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    fname : str,</span>
<span class="sd">        File path.</span>

<span class="sd">    data : np.ndarray</span>
<span class="sd">        Data to save.</span>

<span class="sd">    metadata : dict, optional</span>
<span class="sd">        File metadata to store in file (ImageJ format). Default = None.</span>

<span class="sd">    resolution : 3-tuple, optional</span>
<span class="sd">         Resolution of the file. Default value = [1,1,1].</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    No return. Saves file to disk.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">metadata</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">metadata</span> <span class="k">else</span> <span class="n">metadata</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">metadata</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;spacing&#39;</span><span class="p">,</span> <span class="n">resolution</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">metadata</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;unit&#39;</span><span class="p">,</span> <span class="n">unit</span><span class="p">)</span>
    <span class="n">metadata</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;slices&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;segmented&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">segmented</span>

    <span class="k">if</span> <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;segmented&#39;</span><span class="p">]:</span>
        <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;backgroundlabel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">segmented</span>
        <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;walllabel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">walllabel</span>
        <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;segmentation_software&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">segmentation_software</span>
        <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;segmentation_method&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">segmentation_method</span>
        <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;parameters&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parameters</span>
        <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;preprocessing&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">preprocessing</span>

    <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="n">extra_tags</span><span class="p">:</span>
        <span class="n">metadata</span><span class="p">[</span><span class="n">ii</span><span class="p">]</span> <span class="o">=</span> <span class="n">extra_tags</span><span class="p">[</span><span class="n">ii</span><span class="p">]</span>

    <span class="n">imsave</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">,</span>
           <span class="n">resolution</span><span class="o">=</span><span class="n">resolution</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">3</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">imagej</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span></div>
           <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<div class="viewcode-block" id="tiffload"><a class="viewcode-back" href="../../phenotastic.html#phenotastic.file_processing.tiffload">[docs]</a><span class="k">def</span> <span class="nf">tiffload</span><span class="p">(</span><span class="n">fname</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loads an image file as a tifffile.TiffFile object.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    fname : str</span>
<span class="sd">        File path.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    fobj : tvfile</span>
<span class="sd">        The file object.</span>


<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fobj</span> <span class="o">=</span> <span class="n">tvfile</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span> <span class="c1">#TiffFile(fname)</span>

    <span class="k">def</span> <span class="nf">lowerdict</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
        <span class="n">new_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="nb">dict</span><span class="p">):</span>
                    <span class="n">new_dict</span><span class="p">[</span><span class="n">k</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span> <span class="o">=</span> <span class="n">lowerdict</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="n">new_dict</span><span class="p">[</span><span class="n">k</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span> <span class="o">=</span> <span class="p">[</span><span class="n">lowerdict</span><span class="p">(</span><span class="n">ii</span><span class="p">)</span> <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="n">k</span><span class="p">]]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">new_dict</span><span class="p">[</span><span class="n">k</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span> <span class="o">=</span> <span class="n">v</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">new_dict</span> <span class="o">=</span> <span class="n">d</span>
        <span class="k">return</span> <span class="n">new_dict</span>

    <span class="n">metadata</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">fobj</span><span class="p">):</span>
        <span class="k">if</span> <span class="s1">&#39;_metadata&#39;</span> <span class="ow">in</span> <span class="n">ii</span> <span class="ow">and</span> <span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;fobj.&#39;</span> <span class="o">+</span> <span class="n">ii</span><span class="p">):</span>
            <span class="n">thisdict</span> <span class="o">=</span> <span class="n">lowerdict</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;fobj.&#39;</span> <span class="o">+</span> <span class="n">ii</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">jj</span> <span class="ow">in</span> <span class="n">thisdict</span><span class="p">:</span>
                <span class="n">metadata</span><span class="p">[</span><span class="n">jj</span><span class="p">]</span> <span class="o">=</span> <span class="n">thisdict</span><span class="p">[</span><span class="n">jj</span><span class="p">]</span>
    <span class="n">fobj</span><span class="o">.</span><span class="n">imagej_metadata</span> <span class="o">=</span> <span class="n">metadata</span>

    <span class="n">pages</span> <span class="o">=</span> <span class="n">fobj</span><span class="o">.</span><span class="n">pages</span><span class="o">.</span><span class="n">pages</span>
    <span class="n">ss</span> <span class="o">=</span> <span class="n">fobj</span><span class="o">.</span><span class="n">series</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">npages</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">fobj</span><span class="o">.</span><span class="n">pages</span><span class="o">.</span><span class="n">pages</span><span class="p">)</span>
    <span class="n">nseries</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">fobj</span><span class="o">.</span><span class="n">series</span><span class="p">)</span>

    <span class="n">cindex</span><span class="o">=</span><span class="n">ss</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">cindex</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">nchannels</span> <span class="o">=</span> <span class="n">ss</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="n">cindex</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">nchannels</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="c1"># Reduce the series to the part of the data we actually want.</span>
    <span class="n">newSeries</span> <span class="o">=</span> <span class="n">tifffile</span><span class="o">.</span><span class="n">TiffPageSeries</span><span class="p">(</span>
        <span class="n">pages</span><span class="p">[::</span><span class="n">nseries</span><span class="p">],</span> <span class="p">(</span><span class="n">npages</span> <span class="o">/</span> <span class="n">nseries</span><span class="p">,</span> <span class="n">nchannels</span><span class="p">,</span> <span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">imagelength</span><span class="p">,</span>
                           <span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">imagewidth</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">ss</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="s1">&#39;ZCYX&#39;</span><span class="p">,</span>
        <span class="n">stype</span><span class="o">=</span><span class="s1">&#39;ImageJ&#39;</span><span class="p">)</span>
    <span class="n">newSeries</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">ss</span><span class="o">.</span><span class="n">offset</span>
    <span class="n">newSeries</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">ss</span><span class="o">.</span><span class="n">parent</span>
    <span class="n">fobj</span><span class="o">.</span><span class="n">series</span> <span class="o">=</span> <span class="p">[</span><span class="n">newSeries</span><span class="p">]</span>

    <span class="c1"># Set pages according to new series</span>
    <span class="n">fobj</span><span class="o">.</span><span class="n">pages</span><span class="o">.</span><span class="n">clear</span><span class="p">(</span><span class="n">fully</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">fobj</span><span class="o">.</span><span class="n">pages</span><span class="o">.</span><span class="n">pages</span> <span class="o">=</span> <span class="n">newSeries</span><span class="o">.</span><span class="n">_pages</span>

    <span class="c1"># Assign tvfile attributes the new data</span>
    <span class="n">fobj</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">fobj</span><span class="o">.</span><span class="n">asarray</span><span class="p">()</span>
    <span class="n">fobj</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">fobj</span><span class="o">.</span><span class="n">imagej_metadata</span>
</div>
    <span class="k">return</span> <span class="n">fobj</span>

<div class="viewcode-block" id="get_array"><a class="viewcode-back" href="../../phenotastic.html#phenotastic.file_processing.get_array">[docs]</a><span class="k">def</span> <span class="nf">get_array</span><span class="p">(</span><span class="n">fobj</span><span class="p">,</span> <span class="n">channel</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    TODO</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    fobj :</span>

<span class="sd">    channel :</span>
<span class="sd">         (Default value = -1)</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">arr</span> <span class="o">=</span> <span class="n">fobj</span><span class="o">.</span><span class="n">asarray</span><span class="p">()</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="n">tifffile</span><span class="o">.</span><span class="n">tifffile</span><span class="o">.</span><span class="n">transpose_axes</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">fobj</span><span class="o">.</span><span class="n">series</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">axes</span><span class="p">,</span> <span class="s1">&#39;TZCYXS&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">channel</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:,</span> <span class="n">channel</span><span class="p">,</span> <span class="p">:</span> <span class="p">,:,</span> <span class="mi">0</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:,</span> <span class="p">:</span> <span class="p">,:,</span> <span class="mi">0</span><span class="p">]</span></div>
    <span class="k">return</span> <span class="n">arr</span>

<div class="viewcode-block" id="get_resolution"><a class="viewcode-back" href="../../phenotastic.html#phenotastic.file_processing.get_resolution">[docs]</a><span class="k">def</span> <span class="nf">get_resolution</span><span class="p">(</span><span class="n">fobj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns resolution of the image in ZYX order.</span>

<span class="sd">    The z-resolution must have been stored as imagej metadata under the name</span>
<span class="sd">    &quot;spacing&quot;. Similarly, the x, and y resolutions must exist as</span>
<span class="sd">    tifffile.tifffile.TiffTags entries as &quot;&#39;&quot;XResolution&quot;&#39;&quot; and &quot;YResolution&quot;</span>
<span class="sd">    respectively. If these values cannot be found, a value of 1 for the</span>
<span class="sd">    corresponding dimension is returned.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    fobj : tifffile.TiffFile</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>


<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fobj</span><span class="o">.</span><span class="n">pages</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;XResolution&#39;</span><span class="p">],</span> <span class="n">tifffile</span><span class="o">.</span><span class="n">TiffTag</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">fobj</span><span class="o">.</span><span class="n">pages</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;XResolution&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">fobj</span><span class="o">.</span><span class="n">pages</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;XResolution&#39;</span><span class="p">]</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">fobj</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;voxelsizex&#39;</span><span class="p">]</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fobj</span><span class="o">.</span><span class="n">pages</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;YResolution&#39;</span><span class="p">],</span> <span class="n">tifffile</span><span class="o">.</span><span class="n">TiffTag</span><span class="p">):</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">fobj</span><span class="o">.</span><span class="n">pages</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;YResolution&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">fobj</span><span class="o">.</span><span class="n">pages</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;YResolution&#39;</span><span class="p">]</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">fobj</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;voxelsizey&#39;</span><span class="p">]</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
            <span class="n">y</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">fobj</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;spacing&#39;</span><span class="p">]</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">z</span> <span class="o">=</span> <span class="n">fobj</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;voxelsizez&#39;</span><span class="p">]</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
            <span class="n">z</span> <span class="o">=</span> <span class="mf">1.0</span>

    <span class="n">res</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">z</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">])</span>
</div>
    <span class="k">return</span> <span class="n">res</span>

<div class="viewcode-block" id="set_xresolution"><a class="viewcode-back" href="../../phenotastic.html#phenotastic.file_processing.set_xresolution">[docs]</a><span class="k">def</span> <span class="nf">set_xresolution</span><span class="p">(</span><span class="n">fobj</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns resolution of the image in ZYX format.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    fobj : tifffile.TiffFile</span>
<span class="sd">        Input file.</span>

<span class="sd">    value : float</span>
<span class="sd">        New resolution.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>


<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">fobj</span><span class="o">.</span><span class="n">pages</span><span class="p">)):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fobj</span><span class="o">.</span><span class="n">pages</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="n">ii</span><span class="p">],</span> <span class="n">tifffile</span><span class="o">.</span><span class="n">TiffPage</span><span class="p">):</span></div>
            <span class="n">fobj</span><span class="o">.</span><span class="n">pages</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="n">ii</span><span class="p">]</span><span class="o">.</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;XResolution&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>


<div class="viewcode-block" id="set_yresolution"><a class="viewcode-back" href="../../phenotastic.html#phenotastic.file_processing.set_yresolution">[docs]</a><span class="k">def</span> <span class="nf">set_yresolution</span><span class="p">(</span><span class="n">fobj</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Sets resolution of image file.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    fobj : tifffile.TiffFile</span>
<span class="sd">        Input file.</span>

<span class="sd">    value : float</span>
<span class="sd">        New resolution.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>


<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">fobj</span><span class="o">.</span><span class="n">pages</span><span class="p">)):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fobj</span><span class="o">.</span><span class="n">pages</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="n">ii</span><span class="p">],</span> <span class="n">tifffile</span><span class="o">.</span><span class="n">TiffPage</span><span class="p">):</span></div>
            <span class="n">fobj</span><span class="o">.</span><span class="n">pages</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="n">ii</span><span class="p">]</span><span class="o">.</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;YResolution&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>


<div class="viewcode-block" id="set_zresolution"><a class="viewcode-back" href="../../phenotastic.html#phenotastic.file_processing.set_zresolution">[docs]</a><span class="k">def</span> <span class="nf">set_zresolution</span><span class="p">(</span><span class="n">fobj</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets resolution of image file.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    fobj : tifffile.TiffFile</span>
<span class="sd">        Input file.</span>

<span class="sd">    value : float</span>
<span class="sd">        New resolution.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>


<span class="sd">    &quot;&quot;&quot;</span></div>
    <span class="n">fobj</span><span class="o">.</span><span class="n">imagej_metadata</span><span class="p">[</span><span class="s1">&#39;spacing&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>


<div class="viewcode-block" id="set_resolution"><a class="viewcode-back" href="../../phenotastic.html#phenotastic.file_processing.set_resolution">[docs]</a><span class="k">def</span> <span class="nf">set_resolution</span><span class="p">(</span><span class="n">fobj</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets resolution of image file.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    fobj : tifffile.TiffFile</span>
<span class="sd">        Input file.</span>

<span class="sd">    values : np.ndarray</span>
<span class="sd">        New resolution.</span>

<span class="sd">    Note</span>
<span class="sd">    ----</span>
<span class="sd">    Values are in order ZYX.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="c1"># TODO: Should this be IOError?</span>
        <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s1">&#39;Resolution must be of length 3.&#39;</span><span class="p">)</span>

    <span class="n">set_zresolution</span><span class="p">(</span><span class="n">fobj</span><span class="p">,</span> <span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">set_yresolution</span><span class="p">(</span><span class="n">fobj</span><span class="p">,</span> <span class="n">values</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span></div>
    <span class="n">set_xresolution</span><span class="p">(</span><span class="n">fobj</span><span class="p">,</span> <span class="n">values</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>


<div class="viewcode-block" id="get_metadata"><a class="viewcode-back" href="../../phenotastic.html#phenotastic.file_processing.get_metadata">[docs]</a><span class="k">def</span> <span class="nf">get_metadata</span><span class="p">(</span><span class="n">fobj</span><span class="p">,</span> <span class="n">mtype</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve file metadata.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    fobj : tvfile</span>
<span class="sd">        Input file.</span>

<span class="sd">    mtype : str, optional</span>
<span class="sd">        Metadata type. Possible values are among others &quot;lsm2 and &quot;&quot;imagej&quot;.</span>
<span class="sd">        (Default = &quot;imagej&quot;).</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    metadata : dict</span>
<span class="sd">        File metadata.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">mtype</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;fobj.</span><span class="si">%s</span><span class="s1">_metadata&#39;</span> <span class="o">%</span> <span class="n">mtype</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">fobj</span><span class="o">.</span><span class="n">metadata</span></div>
    <span class="k">return</span> <span class="n">metadata</span>


<div class="viewcode-block" id="set_metadata"><a class="viewcode-back" href="../../phenotastic.html#phenotastic.file_processing.set_metadata">[docs]</a><span class="k">def</span> <span class="nf">set_metadata</span><span class="p">(</span><span class="n">fobj</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="n">mtype</span><span class="o">=</span><span class="s1">&#39;imagej&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set file metadata.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    fobj : tifffile.TiffFile</span>
<span class="sd">        Input file.</span>

<span class="sd">    metadata : dict</span>
<span class="sd">        New metadata dictionary.</span>

<span class="sd">    mtype : str, optional</span>
<span class="sd">        Metadata type. Possible values are among others &#39;lsm&#39; and &#39;imagej&#39;.</span>
<span class="sd">        (Default = &#39;imagej&#39;).</span>

<span class="sd">    Note</span>
<span class="sd">    ----</span>
<span class="sd">    Missing but required values will be added when the file is saved if not</span>
<span class="sd">    contained in ultimate metadata. See @tiffsave.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">        No return. Modifies input file in place.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">mtype</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;fobj.</span><span class="si">%s</span><span class="s1">_metadata = metadata&#39;</span> <span class="o">%</span> <span class="n">mtype</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span></div>
        <span class="n">fobj</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span>

<div class="viewcode-block" id="tvf2si"><a class="viewcode-back" href="../../phenotastic.html#phenotastic.file_processing.tvf2si">[docs]</a><span class="k">def</span> <span class="nf">tvf2si</span><span class="p">(</span><span class="n">fobj</span><span class="p">,</span> <span class="n">reduce_dims</span><span class="o">=</span><span class="p">[]):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert a TiffFile to a SpatialImage.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    fobj : tifffile.TiffFile</span>
<span class="sd">        Input file.</span>

<span class="sd">    reduce_dims : list</span>
<span class="sd">        List of tuples setting what dimensions to reduce, and by what index,</span>
<span class="sd">        using np.take under the hood. First tuple index sets the index of the</span>
<span class="sd">        given axis, whereas the second tuple index sets the corresponding axis</span>
<span class="sd">        itself. An input array arr of shape (193, 3, 512, 512) using</span>
<span class="sd">        reduce_dims=[(2, 1)] therefore inputs the equivalent of arr[:,2,...]</span>
<span class="sd">        into the conversion.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">        simage : timagetk.components.SpatialImage</span>
<span class="sd">            SpatialImage object.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">timagetk.components</span> <span class="k">import</span> <span class="n">SpatialImage</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Requires working version of timagetk.&#39;</span><span class="p">)</span>

    <span class="n">metadata</span> <span class="o">=</span> <span class="n">fobj</span><span class="o">.</span><span class="n">metadata</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="n">fobj</span><span class="o">.</span><span class="n">data</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">reduce_dims</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">reduce_dims</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">reduce_dims</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">l</span><span class="p">:</span> <span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">reduce_dims</span><span class="p">)):</span>
            <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">reduce_dims</span><span class="p">[</span><span class="n">ii</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="n">reduce_dims</span><span class="p">[</span><span class="n">ii</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>

    <span class="n">simage</span> <span class="o">=</span> <span class="n">SpatialImage</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">metadata_dict</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
                          <span class="n">voxelsize</span><span class="o">=</span><span class="n">get_resolution</span><span class="p">(</span><span class="n">fobj</span><span class="p">))</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">simage</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Image not created. This is typically due to the input&#39;</span> <span class="o">+</span>
                        <span class="s1">&#39; image having too many dimensions. Try reducing using&#39;</span> <span class="o">+</span>
                        <span class="s1">&#39; input parameter &quot;reduce_dims&quot;.&#39;</span><span class="p">)</span>
</div>
    <span class="k">return</span> <span class="n">simage</span>

<div class="viewcode-block" id="si2tvf"><a class="viewcode-back" href="../../phenotastic.html#phenotastic.file_processing.si2tvf">[docs]</a><span class="k">def</span> <span class="nf">si2tvf</span><span class="p">(</span><span class="n">fobj</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    TODO: This might not be working properly yet.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    fobj :</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">timagetk.components</span> <span class="k">import</span> <span class="n">SpatialImage</span>
        <span class="kn">import</span> <span class="nn">tempfile</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Requires working version of timagetk. Also requires tempfile.&#39;</span><span class="p">)</span>

    <span class="n">metadata</span> <span class="o">=</span> <span class="n">fobj</span><span class="o">.</span><span class="n">metadata</span>
    <span class="n">resolution</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">fobj</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;voxelsize&#39;</span><span class="p">]))</span>

    <span class="c1"># These can mess up reading/writing TiffFiles</span>
    <span class="n">to_delete</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;shape&#39;</span><span class="p">,</span> <span class="s1">&#39;dim&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;voxelsize&#39;</span><span class="p">,</span> <span class="s1">&#39;extent&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="n">to_delete</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">ii</span> <span class="ow">in</span> <span class="n">metadata</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">metadata</span><span class="p">[</span><span class="n">ii</span><span class="p">]</span>

    <span class="c1"># TODO: Make it so that we create a TiffFile directly from the array.</span>
    <span class="n">tmpname</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">NamedTemporaryFile</span><span class="p">()</span><span class="o">.</span><span class="n">name</span>
    <span class="n">tiffsave</span><span class="p">(</span><span class="n">tmpname</span><span class="p">,</span> <span class="n">fobj</span><span class="o">.</span><span class="n">get_array</span><span class="p">(),</span> <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
             <span class="n">resolution</span><span class="o">=</span><span class="n">resolution</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>
    <span class="k">return</span> <span class="n">tiffload</span><span class="p">(</span><span class="n">tmpname</span><span class="p">)</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Phenotastic 0.1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Henrik Ahl.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.1.
    </div>
  </body>
</html>